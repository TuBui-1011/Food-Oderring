<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>What2Eat - Food Ordering</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Bootstrap 4 -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    />
    <!-- Google Font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />

    <!-- jQuery & Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <style>
      body {
        font-family: "Nunito", sans-serif;
      }

      .hero {
        background-color: #1ac073;
        color: white;
        padding: 80px 0;
      }

      .search-bar input {
        border-radius: 30px 0 0 30px;
      }

      .search-bar button {
        border-radius: 0 30px 30px 0;
        background-color: #ffc107;
        color: #000;
      }

      .hero-img {
        max-width: 100%;
      }

      .navbar-brand {
        font-weight: bold;
        color: white !important;
      }

      .nav-link {
        color: white !important;
      }
      /* Css phần body */
      .card-title {
        font-size: 1rem;
        margin-bottom: 0.5rem;
      }

      .card-footer {
        font-size: 0.85rem;
      }

      .badge {
        font-size: 0.75rem;
        padding: 0.5em 0.6em;
        border-radius: 5px;
      }
      /* Css phần blog */
      .card-img-top {
        object-fit: cover;
        height: 200px;
        border-top-left-radius: 8px;
        border-top-right-radius: 8px;
      }

      .card {
        border: none;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.08);
        transition: transform 0.2s ease;
        border-radius: 8px;
      }

      .card:hover {
        transform: translateY(-5px);
      }

      .card-title {
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 0.4rem;
      }

      .card-text {
        font-size: 0.9rem;
        color: #555;
      }
      /* Css cho phần Question */
      /* Add to your <style> */
      #send-question-form .form-control {
        border-radius: 5px;
      }
      #send-question-form .btn {
        border-radius: 5px;
        font-weight: 600;
      }

      /* Toast Notification */
      .toast-container {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 9999;
      }

      .toast {
        background-color: #ffffff;
        border-left: 4px solid #1ac073;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        border-radius: 4px;
        padding: 16px;
        margin-bottom: 10px;
        min-width: 300px;
        display: flex;
        align-items: center;
        animation: slideIn 0.3s ease-in-out;
      }

      .toast.success {
        border-left-color: #1ac073;
      }

      .toast.error {
        border-left-color: #dc3545;
      }

      .toast-icon {
        margin-right: 12px;
        font-size: 20px;
      }

      .toast.success .toast-icon {
        color: #1ac073;
      }

      .toast.error .toast-icon {
        color: #dc3545;
      }

      .toast-message {
        flex-grow: 1;
        font-size: 14px;
        color: #333;
      }

      @keyframes slideIn {
        from {
          transform: translateX(100%);
          opacity: 0;
        }
        to {
          transform: translateX(0);
          opacity: 1;
        }
      }

      @keyframes fadeOut {
        0% {
          opacity: 1;
          transform: translateX(0);
        }
        50% {
          opacity: 0.5;
          transform: translateX(10%);
        }
        100% {
          opacity: 0;
          transform: translateX(100%);
        }
      }
    </style>
  </head>
  <body>
    <!-- Thêm container cho toast -->
    <div class="toast-container"></div>

    <!-- Navbar -->
    <nav
      class="navbar navbar-expand-lg navbar-dark"
      style="background-color: #1ac073"
    >
      <div class="container">
        <a class="navbar-brand" href="#">WHAT2EAT</a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item"><a class="nav-link" href="#">Home</a></li>
            <li class="nav-item"><a class="nav-link" href="#">About</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Menu</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Blog</a></li>
            <li class="nav-item"><a class="nav-link" href="#">Contact</a></li>
          </ul>
        </div>
        <!-- Icon buttons bên phải -->
        <div class="navbar-icons d-flex">
          <a href="#" class="nav-link text-white">
            <i class="fas fa-search"></i>
          </a>
          <a href="cart.html" class="nav-link text-white position-relative">
            <i class="fas fa-shopping-cart" style="color: white"></i>
            <span
              class="badge badge-danger position-absolute"
              style="top: 0; right: 0; font-size: 0.6rem"
            ></span>
          </a>
        </div>
      </div>
    </nav>

    <!-- HEADER HERO SECTION -->
    <section class="hero">
      <div class="container">
        <div class="row align-items-center">
          <!-- Left Text -->
          <div class="col-md-6">
            <h1 class="display-4">
              Authentic Home<br />
              food in UK
            </h1>
            <p class="lead">
              What2Eat is a courier service in which authentic home cook food is
              delivered to a customer.
            </p>
            <div class="search-bar mt-4 d-flex">
              <input
                type="text"
                class="form-control"
                placeholder="Search food you love"
              />
              <button class="btn btn-warning ml-2">Search</button>
            </div>
          </div>
          <!-- Right Image -->
          <div class="col-md-6 text-center">
            <img
              src="image/Screenshot 2025-04-22 084640.png"
              alt="cooking"
              class="hero-img"
            />
          </div>
        </div>
      </div>
    </section>
    <!-- Body Section: Home Kitchen -->
    <section class="menu-section py-5 bg-light">
      <div class="container">
        <!-- Header + Filter -->
        <div class="d-flex justify-content-between align-items-center mb-4">
          <h3 class="mb-0 font-weight-bold">Home Kitchen</h3>
          <div class="dropdown">
            <button
              class="btn btn-outline-secondary dropdown-toggle"
              type="button"
              data-toggle="dropdown"
            >
              Filters
            </button>
            <div class="dropdown-menu">
              <a class="dropdown-item" href="#">Popular</a>
              <a class="dropdown-item" href="#">Price: Low to High</a>
              <a class="dropdown-item" href="#">Price: High to Low</a>
            </div>
          </div>
        </div>

        <!-- Filter Buttons -->
        <div class="mb-4">
          <div class="btn-group" role="group">
            <button class="btn btn-warning">All</button>
            <button class="btn btn-outline-warning">Button</button>
            <button class="btn btn-outline-warning">Free delivery</button>
            <button class="btn btn-outline-warning">New</button>
            <button class="btn btn-outline-warning">Coming</button>
          </div>
        </div>

        <!-- Grid of Items -->
        <div class="row" id="menu-items">
          <!-- Sample Item Card -->

          <!-- Lặp nhiều lần khi load từ API -->
        </div>
      </div>
    </section>

    <!--BLOG SECTION-->
    <section class="py-5">
      <div class="container">
        <h3 class="mb-4 font-weight-bold">Our Blog</h3>
        <div class="row blog-container">
          <!-- Nội dung blog sẽ được load vào đây -->
        </div>
      </div>
    </section>

    <!--SEND QUESTION SECTION-->

    <!-- Send Question Section -->
    <!-- Send Question Section -->
    <section class="py-5 bg-light">
      <div class="container">
        <div class="row align-items-center">
          <!-- Cột trái: tiêu đề + form -->
          <div class="col-lg-6 mb-4 mb-lg-0">
            <h3 class="font-weight-bold">
              Do you have a question<br />or want to become a seller?
            </h3>
            <p class="text-muted mb-4">
              Fill this form and our manager will contact you next 48 hours.
            </p>
            <form id="send-question-form">
              <div class="form-row">
                <div class="form-group col-sm-6">
                  <input
                    type="text"
                    class="form-control"
                    id="q-name"
                    placeholder="Your Name"
                    required
                  />
                </div>
                <div class="form-group col-sm-6">
                  <input
                    type="email"
                    class="form-control"
                    id="q-email"
                    placeholder="Your e-mail"
                    required
                  />
                </div>
              </div>
              <div class="form-group">
                <textarea
                  class="form-control"
                  id="q-message"
                  rows="5"
                  placeholder="Your message"
                  required
                ></textarea>
              </div>
              <button type="submit" class="btn btn-warning">
                Send Question
              </button>
            </form>
          </div>

          <!-- Cột phải: hình ảnh -->
          <div class="col-lg-6 text-center">
            <img
              src="image/Screenshot 2025-04-24 005059.png"
              alt="Delivery Illustration"
              class="img-fluid rounded"
            />
          </div>
        </div>
      </div>
    </section>

    <!--SECTION FOOTER-->

    <footer class="bg-success text-white pt-4">
      <div class="container">
        <div class="row align-items-center">
          <!-- Logo / Brand -->
          <div class="col-md-4 text-center text-md-left mb-3 mb-md-0">
            <a href="#" class="navbar-brand text-white m-0 p-0">WHAT2EAT</a>
          </div>

          <!-- Menu links -->
          <div class="col-md-4 text-center mb-3 mb-md-0">
            <ul class="list-inline mb-0">
              <li class="list-inline-item mx-2">
                <a href="#" class="text-white">Home</a>
              </li>
              <li class="list-inline-item mx-2">
                <a href="#" class="text-white">About</a>
              </li>
              <li class="list-inline-item mx-2">
                <a href="#" class="text-white">Menu</a>
              </li>
              <li class="list-inline-item mx-2">
                <a href="#" class="text-white">Blog</a>
              </li>
              <li class="list-inline-item mx-2">
                <a href="#" class="text-white">Contact</a>
              </li>
            </ul>
          </div>

          <!-- Social icons -->
          <div class="col-md-4 text-center text-md-right">
            <a href="#" class="text-white mx-2"
              ><i class="fab fa-facebook-f"></i
            ></a>
            <a href="#" class="text-white mx-2"
              ><i class="fab fa-instagram"></i
            ></a>
          </div>
        </div>

        <!-- Divider line -->
        <hr class="border-light my-3" />

        <!-- Copyright -->
        <div class="row">
          <div class="col text-center">
            <small>Copyright ©2021 What2Eat</small>
          </div>
        </div>
      </div>
    </footer>

    <script>
      // Utility Functions
      function updateCartIcon() {
        let vCart = localStorage.getItem("cart");
        if (vCart) {
          vCart = JSON.parse(vCart);
          if (vCart.length > 0) {
            // Có sản phẩm -> màu vàng
            $(".fa-shopping-cart").css("color", "#ffc107");
            $(".fa-shopping-cart").siblings(".badge").text(vCart.length);
          } else {
            // Không có sản phẩm -> màu trắng
            $(".fa-shopping-cart").css("color", "white");
            $(".fa-shopping-cart").siblings(".badge").text("");
          }
        } else {
          // Chưa có giỏ hàng -> màu trắng
          $(".fa-shopping-cart").css("color", "white");
          $(".fa-shopping-cart").siblings(".badge").text("");
        }
      }

      function showToast(message, type = 'success') {
        const toastContainer = document.querySelector('.toast-container');
        
        // Tạo toast element
        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        
        // Icon cho toast
        const icon = type === 'success' ? 'check-circle' : 'exclamation-circle';
        
        toast.innerHTML = `
          <i class="fas fa-${icon} toast-icon"></i>
          <div class="toast-message">${message}</div>
        `;
        
        // Thêm toast và bắt đầu animation ngay lập tức
        toastContainer.appendChild(toast);
        toast.style.animation = 'fadeOut 2s ease-in-out forwards';
        
        // Xóa toast sau khi animation kết thúc
        setTimeout(() => {
          toastContainer.removeChild(toast);
        }, 2000);
      }

      function addToCart(id, name, price, imageUrl) {
        let cart = localStorage.getItem("cart");
        if (cart) {
          cart = JSON.parse(cart);
        } else {
          cart = [];
        }

        // Kiểm tra xem món ăn đã có trong giỏ hàng chưa
        const existingItem = cart.find(item => item.id === id);
        if (existingItem) {
          existingItem.quantity += 1;
        } else {
          cart.push({
            id: id,
            name: name,
            price: price,
            quantity: 1,
            imageUrl: imageUrl
          });
        }

        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartIcon();
        
        // Hiển thị toast thông báo
        showToast(`Đã thêm ${name} vào giỏ hàng`);
      }

      function showError(message) {
        showToast(message, 'error');
      }

      // Document Ready Handler
      $(document).ready(function () {
        // Gọi hàm cập nhật icon khi tải trang
        updateCartIcon();

        // LOAD API PIZZA VÀO PHẦN HOME KITCHEN
        const apiUrl = "https://64747ed27de100807b1b0fa4.mockapi.io/api/v1/pizza";

        $.get(apiUrl, function (data) {
          data.forEach((item) => {
            $("#menu-items").append(`
              <div class="col-md-3 col-sm-6 mb-4">
                <div class="card position-relative h-100">
                  ${
                    item.discount
                      ? `<span class="badge badge-warning position-absolute" style="top:10px; left:10px;">${item.discount}</span>`
                      : ""
                  }
                  <img src="${item.imageUrl}" class="card-img-top" alt="${
              item.name
            }">
                  <div class="card-body d-flex flex-column">
                    <h5 class="card-title">${item.name}</h5>
                    <div class="d-flex justify-content-between align-items-center">
                      <span class="text-dark font-weight-bold">$${
                        item.price
                      }</span>
                      <button class="btn btn-outline-warning btn-sm rounded-circle add-to-cart-btn" 
                              data-id="${item.id}" 
                              data-name="${item.name}" 
                              data-price="${item.price}"
                              data-image="${item.imageUrl}">
                        <i class="fas fa-plus"></i>
                      </button>
                    </div>
                  </div>
                  <div class="card-footer bg-white border-0 d-flex justify-content-between small text-muted">
                    <span><i class="fas fa-star text-warning"></i> ${
                      item.rating
                    }</span>
                    <span>${item.time}</span>
                  </div>
                </div>
              </div>
            `);
          });

          // Xử lý sự kiện click vào nút + để thêm vào giỏ hàng
          $(document).on("click", ".add-to-cart-btn", function () {
            const productId = $(this).data("id");
            const productName = $(this).data("name");
            const productPrice = $(this).data("price");
            const productImage = $(this).data("image");

            addToCart(productId, productName, productPrice, productImage);
          });
        }).fail(function () {
          showError("Không thể tải dữ liệu từ API pizza...");
        });

        // LOAD API BLOG VÀO PHẦN OUR BLOG
        const vBlogApi = "https://64747ed27de100807b1b0fa4.mockapi.io/api/v1/blogs";

        $.get(vBlogApi, function (blogs) {
          const vLayout = [
            { col: "col-12 col-sm-6 col-md-3", offset: "" },
            { col: "col-12 col-md-6", offset: "" },
            { col: "col-12 col-sm-6 col-md-3", offset: "" },
            { col: "col-12 col-sm-6 col-md-3", offset: "" },
            { col: "col-12 col-sm-6 col-md-3 ml-auto", offset: "" },
          ];

          blogs.slice(0, 5).forEach((b, i) => {
            const html = `
              <div class="${vLayout[i].col} mb-4">
                <div class="card h-100">
                  <img src="${b.imageUrl}" class="card-img-top" alt="${b.title}" >
                  <div class="card-body">
                    <h6 class="card-title">${b.title}</h6>
                    <p class="card-text small text-muted">${b.description}</p>
                  </div>
                </div>
              </div>
            `;
            $(".blog-container").append(html);
          });
        }).fail(function () {
          showError("Không thể load dữ liệu blog từ API.");
        });
      });
    </script>
  </body>
</html>
